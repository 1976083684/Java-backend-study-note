# Apolloæ•™ç¨‹

æ•™ç¨‹çº²è¦ï¼š

- ç†è§£é…ç½®ä¸­å¿ƒçš„æ¦‚å¿µå’Œä½¿ç”¨åœºæ™¯
- äº†è§£ä¸»æµé…ç½®ä¸­å¿ƒ
- ç†è§£Apolloçš„åŠŸèƒ½ç‰¹æ€§
- æŒæ¡Apolloçš„å¿«é€Ÿå…¥é—¨
- ç†è§£Apolloçš„å·¥ä½œåŸç†
- å®‰è£…Apollo
- ç†è§£Apolloçš„æ ¸å¿ƒæ¦‚å¿µ
- æŒæ¡Apolloçš„é¡¹ç›®ç®¡ç†æ–¹æ³•
- æŒæ¡Apolloçš„é…ç½®ç®¡ç†æ–¹æ³•
- æŒæ¡Apolloé›†ç¾¤ç®¡ç†æ–¹æ³•
- ç†è§£Apolloçš„é…ç½®å‘å¸ƒåŸç†
- æŒæ¡SpringBoot é›†æˆApolloçš„ä½¿ç”¨æ–¹æ³•
- æŒæ¡Apolloç”Ÿäº§ç¯å¢ƒçš„éƒ¨ç½²æ–¹æ³•
- æŒæ¡Apolloç°åº¦å‘å¸ƒçš„æ–¹æ³•

# ğŸ“–1.Apolloç®€ä»‹

## âœ…1.ä»€ä¹ˆæ˜¯é…ç½®

ç¨‹åºåœ¨å¯åŠ¨å’Œè¿è¡Œçš„æ—¶å€™å¾€å¾€éœ€è¦è¯»å–ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œé…ç½®åŸºæœ¬ä¸Šä¼´éšç€åº”ç”¨ç¨‹åºçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚æ¯”å¦‚ï¼šæ•°æ®åº“è¿æ¥å‚æ•°ã€å¯åŠ¨å‚æ•°ç­‰ã€‚

é…ç½®ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š

- **é…ç½®æ˜¯ç‹¬ç«‹äºç¨‹åºçš„åªè¯»å˜é‡**

- **é…ç½®ä¼´éšåº”ç”¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ**

  - é…ç½®è´¯ç©¿äºåº”ç”¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåº”ç”¨åœ¨å¯åŠ¨æ—¶é€šè¿‡è¯»å–é…ç½®æ¥åˆå§‹åŒ–ï¼Œåœ¨è¿è¡Œæ—¶æ ¹æ®é…ç½®è°ƒæ•´è¡Œä¸ºã€‚

  - æ¯”å¦‚ï¼šå¯åŠ¨æ—¶éœ€è¦è¯»å–æœåŠ¡çš„ç«¯å£å·ã€ç³»ç»Ÿåœ¨è¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦è¯»å–å®šæ—¶ç­–ç•¥æ‰§è¡Œå®šæ—¶ä»»åŠ¡ç­‰ã€‚

- **é…ç½®å¯ä»¥æœ‰å¤šç§åŠ è½½æ–¹å¼**
  - å¸¸è§çš„æœ‰ç¨‹åºå†…éƒ¨ç¡¬ç¼–ç ï¼Œé…ç½®æ–‡ä»¶ï¼Œç¯å¢ƒå˜é‡ï¼Œå¯åŠ¨å‚æ•°ï¼ŒåŸºäºæ•°æ®åº“ç­‰
- **é…ç½®éœ€è¦æ²»ç†**
  - æƒé™æ§åˆ¶ï¼šç”±äºé…ç½®èƒ½æ”¹å˜ç¨‹åºçš„è¡Œä¸ºï¼Œä¸æ­£ç¡®çš„é…ç½®ç”šè‡³èƒ½å¼•èµ·ç¾éš¾ï¼Œæ‰€ä»¥å¯¹é…ç½®çš„ä¿®æ”¹å¿…é¡»æœ‰æ¯”è¾ƒå®Œå–„çš„æƒé™æ§åˆ¶
  - ä¸åŒç¯å¢ƒã€é›†ç¾¤é…ç½®ç®¡ç†ï¼šåŒä¸€ä»½ç¨‹åºåœ¨ä¸åŒçš„ç¯å¢ƒï¼ˆå¼€å‘ï¼Œæµ‹è¯•ï¼Œç”Ÿäº§ï¼‰ã€ä¸åŒçš„é›†ç¾¤ï¼ˆå¦‚ä¸åŒçš„æ•°æ®ä¸­å¿ƒï¼‰ç»å¸¸éœ€è¦æœ‰ä¸åŒçš„é…ç½®ï¼Œæ‰€ä»¥éœ€è¦æœ‰å®Œå–„çš„ç¯å¢ƒã€é›†ç¾¤é…ç½®ç®¡ç†

## âœ…2.ä»€ä¹ˆæ˜¯é…ç½®ä¸­å¿ƒ

> èƒŒæ™¯ï¼š
>
> ä¼ ç»Ÿå•ä½“åº”ç”¨å­˜åœ¨ä¸€äº›æ½œåœ¨ç¼ºé™·ï¼Œå¦‚éšç€è§„æ¨¡çš„æ‰©å¤§ï¼Œéƒ¨ç½²æ•ˆç‡é™ä½ï¼Œå›¢é˜Ÿåä½œæ•ˆç‡å·®ï¼Œç³»ç»Ÿå¯é æ€§å˜å·®ï¼Œç»´æŠ¤å›°éš¾ï¼Œæ–°åŠŸèƒ½ä¸Šçº¿å‘¨æœŸé•¿ç­‰ï¼Œæ‰€ä»¥è¿«åˆ‡éœ€è¦ä¸€ç§æ–°çš„æ¶æ„å»è§£å†³è¿™äº›é—®é¢˜ï¼Œè€Œå¾®æœåŠ¡ï¼ˆ microservices ï¼‰æ¶æ„æ­£æ˜¯å½“ä¸‹ä¸€ç§æµè¡Œçš„è§£æ³•ã€‚
> ä¸è¿‡ï¼Œè§£å†³ä¸€ä¸ªé—®é¢˜çš„åŒæ—¶ï¼Œå¾€å¾€ä¼šè¯ç”Ÿå‡ºå¾ˆå¤šæ–°çš„é—®é¢˜ï¼Œæ‰€ä»¥å¾®æœåŠ¡åŒ–çš„è¿‡ç¨‹ä¸­ä¼´éšç€å¾ˆå¤šçš„æŒ‘æˆ˜ï¼Œå…¶ä¸­ä¸€ä¸ªæŒ‘æˆ˜å°±æ˜¯æœ‰å…³æœåŠ¡ï¼ˆåº”ç”¨ï¼‰é…ç½®çš„ã€‚å½“ç³»ç»Ÿä»ä¸€ä¸ªå•ä½“åº”ç”¨ï¼Œè¢«æ‹†åˆ†æˆåˆ†å¸ƒå¼ç³»ç»Ÿä¸Šä¸€ä¸ªä¸ªæœåŠ¡èŠ‚ç‚¹åï¼Œé…ç½®æ–‡ä»¶ä¹Ÿå¿…é¡»è·Ÿç€è¿ç§»ï¼ˆåˆ†å‰²ï¼‰ï¼Œè¿™æ ·é…ç½®å°±åˆ†æ•£äº†ï¼Œä¸ä»…å¦‚æ­¤ï¼Œåˆ†æ•£ä¸­è¿˜åŒ…å«ç€å†—ä½™ï¼Œå¦‚ä¸‹å›¾ï¼š
>
> ![image-20251012104810579](images/Apolloæ•™ç¨‹_images/image-20251012104810579.png)

**é…ç½®ä¸­å¿ƒæ˜¯å¾®æœåŠ¡æ¶æ„ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œä½œç”¨æ˜¯ç»Ÿä¸€ç®¡ç†åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ‰€æœ‰å¾®æœåŠ¡çš„é…ç½®æ–‡ä»¶ã€‚**

å¦‚ä¸‹å›¾ï¼Œé…ç½®ä¸­å¿ƒçš„åŠŸèƒ½çœ‹ä¸Šå»å¹¶ä¸èµ·çœ¼ï¼Œæ— éå°±æ˜¯é…ç½®çš„ç®¡ç†å’Œå­˜å–ï¼Œä½†å®ƒæ˜¯æ•´ä¸ªå¾®æœåŠ¡æ¶æ„ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯ã€‚

![image-20251012152740373](images/Apolloæ•™ç¨‹_images/image-20251012152740373.png)

![image-20251012152230630](images/Apolloæ•™ç¨‹_images/image-20251012152230630.png)

é›†ä¸­ç®¡ç†é…ç½®å°±è¦å°†åº”ç”¨çš„é…ç½®ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æœåŠ¡æŠ½ç¦»å‡ºæ¥ï¼ŒåŒæ—¶è¦è§£å†³æ–°çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼šç‰ˆæœ¬ç®¡ç†ï¼ˆä¸ºäº†æ”¯æŒå›æ»šï¼‰ï¼Œæƒé™ç®¡ç†ç­‰ã€‚

æ€»ç»“ä¸€ä¸‹ï¼Œåœ¨ä¼ ç»Ÿå·¨å‹å•ä½“åº”ç”¨çº·çº·è½¬å‘ç»†ç²’åº¦å¾®æœåŠ¡æ¶æ„çš„å†å²è¿›ç¨‹ä¸­ï¼Œé…ç½®ä¸­å¿ƒæ˜¯å¾®æœåŠ¡åŒ–ä¸å¯ç¼ºå°‘çš„ä¸€ä¸ªç³»ç»Ÿç»„ä»¶ï¼Œåœ¨è¿™ç§èƒŒæ™¯ä¸‹ä¸­å¿ƒåŒ–çš„é…ç½®æœåŠ¡å³é…ç½®ä¸­å¿ƒåº”è¿è€Œç”Ÿï¼Œä¸€ä¸ªåˆæ ¼çš„é…ç½®ä¸­å¿ƒéœ€è¦æ»¡è¶³ï¼š

- é…ç½®é¡¹å®¹æ˜“è¯»å–å’Œä¿®æ”¹
- æ·»åŠ æ–°é…ç½®ç®€å•ç›´æ¥
- æ”¯æŒå¯¹é…ç½®çš„ä¿®æ”¹çš„æ£€è§†ä»¥æŠŠæ§é£é™©
- å¯ä»¥æŸ¥çœ‹é…ç½®ä¿®æ”¹çš„å†å²è®°å½•
- ä¸åŒéƒ¨ç½²ç¯å¢ƒæ”¯æŒéš”ç¦»

## âœ…3.ä¸»æµçš„é…ç½®ä¸­å¿ƒ

ç›®å‰å¸‚é¢ä¸Šç”¨çš„æ¯”è¾ƒå¤šçš„é…ç½®ä¸­å¿ƒæœ‰ï¼šï¼ˆæŒ‰å¼€æºæ—¶é—´æ’åºï¼‰

1. Disconf
  2014å¹´7æœˆç™¾åº¦å¼€æºçš„é…ç½®ç®¡ç†ä¸­å¿ƒï¼Œä¸“æ³¨äºå„ç§ã€Œåˆ†å¸ƒå¼ç³»ç»Ÿé…ç½®ç®¡ç†ã€çš„ã€Œé€šç”¨ç»„ä»¶ã€å’Œã€Œé€šç”¨å¹³å°ã€,æä¾›ç»Ÿä¸€çš„ã€Œé…ç½®ç®¡ç†æœåŠ¡ã€ã€‚ç›®å‰å·²ç»ä¸å†ç»´æŠ¤æ›´æ–°ã€‚
  https://github.com/knightliao/disconf
2. Spring Cloud Config
  2014å¹´9æœˆå¼€æºï¼ŒSpring Cloud ç”Ÿæ€ç»„ä»¶ï¼Œå¯ä»¥å’ŒSpring Cloudä½“ç³»æ— ç¼æ•´åˆã€‚
  https://github.com/spring-cloud/spring-cloud-config
3. Apollo
  2016å¹´5æœˆï¼Œæºç¨‹å¼€æºçš„é…ç½®ç®¡ç†ä¸­å¿ƒï¼Œèƒ½å¤Ÿé›†ä¸­åŒ–ç®¡ç†åº”ç”¨ä¸åŒç¯å¢ƒã€ä¸åŒé›†ç¾¤çš„é…ç½®ï¼Œé…ç½®ä¿®æ”¹åèƒ½å¤Ÿå®æ—¶æ¨é€åˆ°åº”ç”¨ç«¯ï¼Œå¹¶ä¸”å…·å¤‡è§„èŒƒçš„æƒé™ã€æµç¨‹æ²»ç†ç­‰ç‰¹æ€§ï¼Œé€‚ç”¨äºå¾®æœåŠ¡é…ç½®ç®¡ç†åœºæ™¯ã€‚
  https://github.com/ctripcorp/apollo

4. Nacos

â€‹	2018å¹´6æœˆï¼Œé˜¿é‡Œå¼€æºçš„é…ç½®ä¸­å¿ƒï¼Œä¹Ÿå¯ä»¥åšDNSå’ŒRPCçš„æœåŠ¡å‘ç°ã€‚

â€‹	https://github.com/alibaba/nacos



**åŠŸèƒ½ç‰¹æ€§å¯¹æ¯”**ï¼š

ç”±äºDisconfä¸å†ç»´æŠ¤ï¼Œä¸‹é¢ä¸»è¦å¯¹æ¯”ä¸€ä¸‹Spring Cloud Configã€Apolloå’ŒNacosã€‚

| åŠŸèƒ½ç‚¹            | Spring Cloud Config     | Apollo                     | Nacos                    |
| :---------------- | :---------------------- | :------------------------- | :----------------------- |
| **é…ç½®å®æ—¶æ¨é€**  | æ”¯æŒ (Spring Cloud Bus) | æ”¯æŒ (HTTPé•¿è½®è¯¢1så†…)      | æ”¯æŒ (HTTPé•¿è½®è¯¢1så†…)    |
| **ç‰ˆæœ¬ç®¡ç†**      | æ”¯æŒ (Git)              | æ”¯æŒ                       | æ”¯æŒ                     |
| **é…ç½®å›æ»š**      | æ”¯æŒ (Git)              | æ”¯æŒ                       | æ”¯æŒ                     |
| **ç°åº¦å‘å¸ƒ**      | æ”¯æŒ                    | æ”¯æŒ                       | 1.1.0 èµ·æ”¯æŒ             |
| **æƒé™ç®¡ç†**      | æ”¯æŒ (ä¾èµ–Git)          | **å®Œå–„** (ç¯å¢ƒ/é…ç½®çº§æƒé™) | 1.2.0 èµ·æä¾›åŸºç¡€æ”¯æŒ     |
| **å¤šé›†ç¾¤**        | æ”¯æŒ                    | æ”¯æŒ                       | æ”¯æŒ                     |
| **å¤šç¯å¢ƒ**        | æ”¯æŒ                    | æ”¯æŒ                       | æ”¯æŒ                     |
| **ç›‘å¬æŸ¥è¯¢**      | æ”¯æŒ                    | æ”¯æŒ                       | æ”¯æŒ                     |
| **å¤šè¯­è¨€**        | åªæ”¯æŒJava              | ä¸»æµè¯­è¨€ï¼Œæä¾›äº†Open API   | ä¸»æµè¯­è¨€ï¼Œæä¾›äº†Open API |
| **é…ç½®æ ¼å¼æ ¡éªŒ**  | **ä¸æ”¯æŒ**              | æ”¯æŒ                       | æ”¯æŒ                     |
| **å•æœºè¯» (QPS)**  | 7 (é™æµæ‰€è‡´)            | 9000                       | 15000                    |
| **å•æœºå†™ (QPS)**  | 5 (é™æµæ‰€è‡´)            | 1100                       | 1800                     |
| **3èŠ‚ç‚¹è¯» (QPS)** | 21 (é™æµæ‰€è‡´)           | 27000                      | 45000                    |
| **3èŠ‚ç‚¹å†™ (QPS)** | 5 (é™æµæ‰€è‡´)            | 3300                       | 5600                     |

åœ¨æ­¤ä¹‹å‰ï¼ŒApolloå’ŒNacosç›¸å¯¹äºSpring Cloud Configçš„ç”Ÿæ€æ”¯æŒæ›´å¹¿ï¼Œåœ¨é…ç½®ç®¡ç†æµç¨‹ä¸Šåšçš„æ›´å¥½ã€‚Apolloç›¸å¯¹äºNacosåœ¨é…ç½®ç®¡ç†åšçš„æ›´åŠ å…¨é¢ï¼ŒNacosåˆ™ä½¿ç”¨èµ·æ¥ç›¸å¯¹æ¯”è¾ƒç®€æ´ï¼Œåœ¨å¯¹æ€§èƒ½è¦æ±‚æ¯”è¾ƒé«˜çš„å¤§è§„æ¨¡åœºæ™¯æ›´é€‚åˆã€‚

ä½†æ˜¯åœ¨å½“å‰2025å¹´çš„é€‰å‹å¤©å¹³å·²æ˜æ˜¾å‘ **Nacos** å€¾æ–œï¼Œç‰¹åˆ«æ˜¯å¯¹äºæ–°é¡¹ç›®å’ŒæŠ€æœ¯æ ˆé€‰å‹é˜¶æ®µã€‚å®ƒåœ¨ä¸€ä½“åŒ–èƒ½åŠ›ã€æ€§èƒ½ã€æ˜“ç”¨æ€§å’Œç¤¾åŒºæ´»æ€§æ–¹é¢å–å¾—äº†è¾ƒå¥½çš„å¹³è¡¡ã€‚è€Œ **Apollo** åˆ™åœ¨éœ€è¦æè‡´é…ç½®æ²»ç†çš„ç‰¹å®šé¢†åŸŸä¿æŒç€ä¸å¯æ›¿ä»£çš„ä¼˜åŠ¿ã€‚



## âœ…4.Apolloä»‹ç»

![image-20251012153825927](images/Apolloæ•™ç¨‹_images/image-20251012153825927.png)

> **Apollo - A reliable configuration management system**ï¼ˆä¸€ä¸ªå¯é çš„é…ç½®ç®¡ç†ç³»ç»Ÿï¼‰
>
> å¼€æºåœ°å€ï¼šhttps://github.com/ctripcorp/apollo

Apolloï¼ˆé˜¿æ³¢ç½—ï¼‰æ˜¯æºç¨‹æ¡†æ¶éƒ¨é—¨ç ”å‘çš„åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒã€‚

- èƒ½å¤Ÿé›†ä¸­åŒ–ç®¡ç†åº”ç”¨çš„ä¸åŒç¯å¢ƒã€ä¸åŒé›†ç¾¤çš„é…ç½®ï¼Œé…ç½®ä¿®æ”¹åèƒ½å¤Ÿå®æ—¶æ¨é€åˆ°åº”ç”¨ç«¯ã€‚

- å¹¶ä¸”å…·å¤‡è§„èŒƒçš„æƒé™ã€æµç¨‹æ²»ç†ç­‰ç‰¹æ€§ï¼Œé€‚ç”¨äºå¾®æœåŠ¡é…ç½®ç®¡ç†åœºæ™¯ã€‚

ApolloåŒ…æ‹¬**æœåŠ¡ç«¯**å’Œ**å®¢æˆ·ç«¯**ä¸¤éƒ¨åˆ†ï¼š

- æœåŠ¡ç«¯åŸºäºSpring Bootå’ŒSpring Cloudå¼€å‘ï¼Œæ‰“åŒ…åå¯ä»¥ç›´æ¥è¿è¡Œï¼Œä¸éœ€è¦é¢å¤–å®‰è£…Tomcatç­‰åº”ç”¨å®¹å™¨ã€‚

- Javaå®¢æˆ·ç«¯ä¸ä¾èµ–ä»»ä½•æ¡†æ¶ï¼Œèƒ½å¤Ÿè¿è¡Œäºæ‰€æœ‰Javaè¿è¡Œæ—¶ç¯å¢ƒï¼ŒåŒæ—¶å¯¹Spring/Spring Bootç¯å¢ƒä¹Ÿæœ‰è¾ƒå¥½çš„æ”¯æŒã€‚



## âœ…5.Apolloç‰¹æ€§

åŸºäºé…ç½®çš„ç‰¹æ®Šæ€§ï¼ŒApolloä»è®¾è®¡ä¹‹åˆå°±ç«‹å¿—äºæˆä¸ºä¸€ä¸ªæœ‰æ²»ç†èƒ½åŠ›çš„é…ç½®å‘å¸ƒå¹³å°ï¼Œç›®å‰æä¾›äº†ä»¥ä¸‹çš„ç‰¹æ€§ï¼š

- **ç»Ÿä¸€ç®¡ç†ä¸åŒç¯å¢ƒã€ä¸åŒé›†ç¾¤çš„é…ç½®**

  - æä¾›äº†ä¸€ä¸ªç»Ÿä¸€ç•Œé¢é›†ä¸­å¼ç®¡ç†ä¸åŒç¯å¢ƒï¼ˆenvironmentï¼‰ã€ä¸åŒé›†ç¾¤ï¼ˆclusterï¼‰ã€ä¸åŒå‘½åç©ºé—´ï¼ˆnamespaceï¼‰çš„é…ç½®ã€‚

  - åŒä¸€ä»½ä»£ç éƒ¨ç½²åœ¨ä¸åŒçš„é›†ç¾¤ï¼Œå¯ä»¥æœ‰ä¸åŒçš„é…ç½®ï¼Œæ¯”å¦‚zookeeperçš„åœ°å€ç­‰ã€‚

  - é€šè¿‡å‘½åç©ºé—´ï¼ˆnamespaceï¼‰å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ”¯æŒå¤šä¸ªä¸åŒåº”ç”¨å…±äº«åŒä¸€ä»½é…ç½®ï¼ŒåŒæ—¶è¿˜å…è®¸åº”ç”¨å¯¹å…±äº«çš„é…ç½®è¿›è¡Œè¦†ç›–ã€‚

- **é…ç½®ä¿®æ”¹å®æ—¶ç”Ÿæ•ˆï¼ˆçƒ­å‘å¸ƒï¼‰**
  - ç”¨æˆ·åœ¨Apolloä¿®æ”¹å®Œé…ç½®å¹¶å‘å¸ƒåï¼Œå®¢æˆ·ç«¯èƒ½å®æ—¶ï¼ˆ1ç§’ï¼‰æ¥æ”¶åˆ°æœ€æ–°çš„é…ç½®ï¼Œå¹¶é€šçŸ¥åˆ°åº”ç”¨ç¨‹åºã€‚

- **ç‰ˆæœ¬å‘å¸ƒç®¡ç†**
  - æ‰€æœ‰çš„é…ç½®å‘å¸ƒéƒ½æœ‰ç‰ˆæœ¬æ¦‚å¿µï¼Œä»è€Œå¯ä»¥æ–¹ä¾¿åœ°æ”¯æŒé…ç½®çš„å›æ»šã€‚

- **ç°åº¦å‘å¸ƒ**

- æ”¯æŒé…ç½®çš„ç°åº¦å‘å¸ƒï¼Œæ¯”å¦‚ç‚¹äº†å‘å¸ƒåï¼Œåªå¯¹éƒ¨åˆ†åº”ç”¨å®ä¾‹ç”Ÿæ•ˆï¼Œç­‰è§‚å¯Ÿä¸€æ®µæ—¶é—´æ²¡é—®é¢˜åå†æ¨ç»™æ‰€æœ‰åº”ç”¨å®ä¾‹ã€‚

- **æƒé™ç®¡ç†ã€å‘å¸ƒå®¡æ ¸ã€æ“ä½œå®¡è®¡**

  - æœ‰å®Œå–„çš„æƒé™ç®¡ç†æœºåˆ¶ï¼Œå¯¹é…ç½®çš„ç®¡ç†è¿˜åˆ†ä¸ºäº†ç¼–è¾‘å’Œå‘å¸ƒä¸¤ä¸ªç¯èŠ‚ï¼Œä»è€Œå‡å°‘äººä¸ºçš„é”™è¯¯ã€‚

  - æ‰€æœ‰çš„æ“ä½œéƒ½æœ‰å®¡è®¡æ—¥å¿—ï¼Œå¯ä»¥æ–¹ä¾¿åœ°è¿½è¸ªé—®é¢˜ã€‚

- **å®¢æˆ·ç«¯é…ç½®ä¿¡æ¯ç›‘æ§**

  - å¯ä»¥åœ¨ç•Œé¢ä¸Šæ–¹ä¾¿åœ°çœ‹åˆ°é…ç½®åœ¨è¢«å“ªäº›å®ä¾‹ä½¿ç”¨ã€‚

  - æä¾›Javaå’Œ.NetåŸç”Ÿå®¢æˆ·ç«¯ï¼Œæ–¹ä¾¿åº”ç”¨é›†æˆã€‚
  - æ”¯æŒSpring Placeholder, Annotationå’ŒSpring Bootçš„ConfigurationPropertiesï¼Œæ–¹ä¾¿åº”ç”¨ä½¿ç”¨ï¼ˆéœ€è¦Spring 3.1.1+ï¼‰
  - åŒæ—¶æä¾›äº†Httpæ¥å£ï¼ŒéJavaå’Œ.Netåº”ç”¨ä¹Ÿå¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨ã€‚

- **æä¾›å¼€æ”¾å¹³å°API**

  - Apolloè‡ªèº«æä¾›äº†æ¯”è¾ƒå®Œå–„çš„ç»Ÿä¸€é…ç½®ç®¡ç†ç•Œé¢ï¼Œæ”¯æŒå¤šç¯å¢ƒã€å¤šæ•°æ®ä¸­å¿ƒé…ç½®ç®¡ç†ã€æƒé™ã€æµç¨‹æ²»ç†ç­‰ç‰¹æ€§ã€‚ä¸è¿‡Apolloå‡ºäºé€šç”¨æ€§è€ƒè™‘ï¼Œä¸ä¼šå¯¹é…ç½®çš„ä¿®æ”¹åšè¿‡å¤šé™åˆ¶ï¼Œåªè¦ç¬¦åˆåŸºæœ¬çš„æ ¼å¼å°±èƒ½ä¿å­˜ï¼Œä¸ä¼šé’ˆå¯¹ä¸åŒçš„é…ç½®å€¼è¿›è¡Œé’ˆå¯¹æ€§çš„æ ¡éªŒï¼Œå¦‚æ•°æ®åº“ç”¨æˆ·åã€å¯†ç ï¼ŒRedisæœåŠ¡åœ°å€ç­‰ã€‚
  - å¯¹äºè¿™ç±»åº”ç”¨é…ç½®ï¼ŒApolloæ”¯æŒåº”ç”¨æ–¹é€šè¿‡å¼€æ”¾å¹³å°APIåœ¨Apolloè¿›è¡Œé…ç½®çš„ä¿®æ”¹å’Œå‘å¸ƒï¼Œå¹¶ä¸”å…·å¤‡å®Œå–„çš„æˆæƒå’Œæƒé™æ§åˆ¶ã€‚



# ğŸ“–2.Apolloå¿«é€Ÿå…¥é—¨

## âœ…1.æ‰§è¡Œæµç¨‹

![image-20251001110706176](images/Apolloæ•™ç¨‹_images/image-20251001110706176.png)

æ“ä½œæµç¨‹å¦‚ä¸‹ï¼š

- 1.åœ¨Apolloé…ç½®ä¸­å¿ƒä¿®æ”¹é…ç½®

- 2.åº”ç”¨ç¨‹åºé€šè¿‡Apolloå®¢æˆ·ç«¯ä»é…ç½®ä¸­å¿ƒæ‹‰å–é…ç½®ä¿¡æ¯

ç”¨æˆ·é€šè¿‡Apolloé…ç½®ä¸­å¿ƒä¿®æ”¹æˆ–å‘å¸ƒé…ç½®åï¼Œä¼šæœ‰ä¸¤ç§æœºåˆ¶æ¥ä¿è¯åº”ç”¨ç¨‹åºæ¥è·å–æœ€æ–°é…ç½®ï¼šä¸€ç§æ˜¯Apolloé…ç½®ä¸­å¿ƒä¼šå‘å®¢æˆ·ç«¯æ¨é€æœ€æ–°çš„é…ç½®ï¼›å¦å¤–ä¸€ç§æ˜¯Apolloå®¢æˆ·ç«¯ä¼šå®šæ—¶ä»Apolloé…ç½®ä¸­å¿ƒæ‹‰å–æœ€æ–°çš„é…ç½®ï¼Œé€šè¿‡ä»¥ä¸Šä¸¤ç§æœºåˆ¶å…±åŒæ¥ä¿è¯åº”ç”¨ç¨‹åºèƒ½åŠæ—¶è·å–åˆ°é…ç½®ã€‚

## âœ…2.å®‰è£…Apollo

> è¿è¡Œæ—¶ç¯å¢ƒè¯´æ˜ï¼š
> Java
>
> - ApolloæœåŠ¡ç«¯ï¼š1.8+
> - Apolloå®¢æˆ·ç«¯ï¼š1.8+
>
> MySQL
>
> - ç‰ˆæœ¬è¦æ±‚ï¼š5.6.5+
>
> Apolloçš„è¡¨ç»“æ„å¯¹ `timestamp` ä½¿ç”¨äº†å¤šä¸ªdefaultå£°æ˜ï¼Œæ‰€ä»¥éœ€è¦5.6.5ä»¥ä¸Šç‰ˆæœ¬ã€‚

### ğŸ§Š1.ä¸‹è½½é…ç½®

- ç™¾åº¦äº‘ç›˜é“¾æ¥: https://pan.baidu.com/s/1RzNTnvNyhio_nm61YVTP5Q æå–ç : e3hq 

- ä¹Ÿå¯åœ¨githubä¸»é¡µè·å–å®‰è£…åŒ…ï¼ˆæœ¬æ¬¡ä½¿ç”¨1.3ç‰ˆæœ¬ï¼‰ï¼šhttps://github.com/ctripcorp/apollo/tags

ä¸‹è½½1.3.0ç‰ˆæœ¬ï¼Œå¯ä»¥ç›´æ¥è®¿é—®https://github.com/apolloconfig/apollo/releases/tag/v1.3.0

![image-20251012161334825](images/Apolloæ•™ç¨‹_images/image-20251012161334825.png)

![image-20251012161944761](images/Apolloæ•™ç¨‹_images/image-20251012161944761.png)

è§£å‹å®‰è£…åŒ…åå°†apollo-configservice-1.3.0.jarã€apollo-adminservice-1.3.0.jarã€apollo-portal-1.3.0.jaræ”¾ç½®äºapolloç›®å½•ä¸‹ã€‚

å¦‚æœä¸‹è½½ç™¾åº¦äº‘ç›˜èµ„æ–™ï¼Œåˆ™å¦‚ä¸‹å›¾

![image-20251012163652597](images/Apolloæ•™ç¨‹_images/image-20251012163652597.png)





### ğŸ§Š2.åˆ›å»ºæ•°æ®åº“

ApolloæœåŠ¡ç«¯å…±éœ€è¦ä¸¤ä¸ªæ•°æ®åº“ï¼š **ApolloPortalDB** å’Œ **ApolloConfigDB** ï¼ŒApolloPortalDBåªéœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ä¸€ä¸ªå³å¯ï¼Œ**è€ŒApolloConfigDBéœ€è¦åœ¨æ¯ä¸ªç¯å¢ƒéƒ¨ç½²ä¸€å¥—ã€‚**

1. åˆ›å»ºApolloPortalDBï¼Œsqlè„šæœ¬ä¸‹è½½åœ°å€ï¼š

   https://github.com/apolloconfig/apollo/blob/v1.3.0/scripts/db/migration/portaldb/V1.0.0__initialization.sql

   ä»¥MySQLåŸç”Ÿå®¢æˆ·ç«¯ä¸ºä¾‹ï¼š

   ```sql
   source apollo/ApolloPortalDB__initialization.sql
   ```

2. åˆ›å»ºApolloConfigDBï¼Œsqlè„šæœ¬ä¸‹è½½åœ°å€:

   https://github.com/ctripcorp/apollo/blob/v1.3.0/scripts/db/migration/configdb/V1.0.0__initialization.sql

   ```sql
   source apollo/ApolloConfigDB__initialization.sql
   ```



### ğŸ§Š3.å¯åŠ¨Apollo

1. ç¡®ä¿**8070, 8080, 8090**ç«¯å£æœªè¢«å ç”¨ï¼ŒApolloé»˜è®¤ä¼šå¯åŠ¨3ä¸ªæœåŠ¡ã€‚

2. å¯åŠ¨apollo-configserviceï¼Œåœ¨apolloç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¯é€šè¿‡-Dserver.port=8080ä¿®æ”¹é»˜è®¤ç«¯å£

   ```java
   java -Xms256m -Xmx256m -Dspring.datasource.url=jdbc:mysql://localhost:3306/ApolloConfigDB?characterEncoding=utf8 -Dspring.datasource.username=root -Dspring.datasource.password=admin -jar apollo-configservice-1.3.0.jar
   ```

3. å¯åŠ¨apollo-adminserviceï¼Œå¯é€šè¿‡-Dserver.port=8090ä¿®æ”¹é»˜è®¤ç«¯å£

   ```java
   java -Xms256m -Xmx256m -Dspring.datasource.url=jdbc:mysql://localhost:3306/ApolloConfigDB?characterEncoding=utf8 -Dspring.datasource.username=root -Dspring.datasource.password=admin -jar apollo-adminservice-1.3.0.jar
   ```

4. å¯åŠ¨apollo-portalï¼Œå¯é€šè¿‡-Dserver.port=8070ä¿®æ”¹é»˜è®¤ç«¯å£

   ```
   java -Xms256m -Xmx256m -Ddev_meta=http://localhost:8080/ -Dserver.port=8070 -Dspring.datasource.url=jdbc:mysql://localhost:3306/ApolloPortalDB?characterEncoding=utf8 -Dspring.datasource.username=root -Dspring.datasource.password=admin -jar apollo-portal-1.3.0.jar
   ```

5. ä¹Ÿå¯ä»¥ä½¿ç”¨æä¾›çš„runApollo.batå¿«é€Ÿå¯åŠ¨ä¸‰ä¸ªæœåŠ¡ï¼ˆä¿®æ”¹æ•°æ®åº“è¿æ¥åœ°å€ï¼Œæ•°æ®åº“ä»¥åŠå¯†ç ï¼‰

   ```bash
   echo
   
   set url="localhost:3306"
   set username="root"
   set password="admin"
   
   start "configService" java -Xms256m -Xmx256m -Dapollo_profile=github -Dspring.datasource.url=jdbc:mysql://%url%/ApolloConfigDB?characterEncoding=utf8 -Dspring.datasource.username=%username% -Dspring.datasource.password=%password% -Dlogging.file=.\logs\apollo-configservice.log -jar .\apollo-configservice-1.3.0.jar
   start "adminService" java -Xms256m -Xmx256m -Dapollo_profile=github -Dspring.datasource.url=jdbc:mysql://%url%/ApolloConfigDB?characterEncoding=utf8 -Dspring.datasource.username=%username% -Dspring.datasource.password=%password% -Dlogging.file=.\logs\apollo-adminservice.log -jar .\apollo-adminservice-1.3.0.jar
   start "ApolloPortal" java -Xms256m -Xmx256m -Dapollo_profile=github,auth -Ddev_meta=http://localhost:8080/ -Dserver.port=8070 -Dspring.datasource.url=jdbc:mysql://%url%/ApolloPortalDB?characterEncoding=utf8 -Dspring.datasource.username=%username% -Dspring.datasource.password=%password% -Dlogging.file=.\logs\apollo-portal.log -jar .\apollo-portal-1.3.0.jar
   ```

   

6. è¿è¡ŒrunApollo.batå³å¯åŒæ—¶å¯åŠ¨ä¸‰ä¸ªæœåŠ¡ï¼Œä¸€é”®å¯åŠ¨Apollo

7. å¾…å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®ç®¡ç†é¡µé¢ apollo/admin

   - åœ°å€ï¼šhttp://localhost:8070

   - åˆå§‹åŒ–è´¦å·å¯†ç ï¼šapollo/admin

![image-20251001110528427](images/Apolloæ•™ç¨‹_images/image-20251001110528427.png)

## âœ…3.ä»£ç å®ç°

### ğŸ§Š1.å‘å¸ƒé…ç½®

1. åœ¨apolloç®¡ç†ç•Œé¢ï¼Œæ–°å»ºé¡¹ç›®apollo-quickstart

![image-20251001111118638](images/Apolloæ•™ç¨‹_images/image-20251001111118638.png)

2.æ–°å»ºæµ‹è¯•é…ç½®é¡¹sms.enable

![image-20251001111903414](images/Apolloæ•™ç¨‹_images/image-20251001111903414.png)

ç¡®è®¤æäº¤é…ç½®é¡¹å³å¯æ·»åŠ 

![image-20251001111433516](images/Apolloæ•™ç¨‹_images/image-20251001111433516.png)

å‘å¸ƒå‰valueå€¼é”™è¯¯å¯ä»¥åœ¨æ“ä½œæ è¿›è¡Œä¿®æ”¹åå†å‘å¸ƒï¼Œå‘å¸ƒå®ŒåçŠ¶æ€ä¼šæ›´æ–°ä¸ºå·²å‘å¸ƒã€‚

### ğŸ§Š2.ä»£ç è¯»å–é…ç½®	

1.æ–°å»ºMavenå·¥ç¨‹

ä½¿ç”¨ideaåˆ›å»ºapollo-quickstarté¡¹ç›®

![image-20251001113657829](images/Apolloæ•™ç¨‹_images/image-20251001113657829.png)

æ‰“å¼€pom.xmlæ–‡ä»¶æ·»åŠ apolloä¾èµ–ï¼Œé…ç½®JDKä¸º1.8

```java
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.man</groupId>
    <artifactId>apollo-quickstart</artifactId>
    <version>1.0-SNAPSHOT</version>

    <properties>
        <java.version>1.8</java.version>
    </properties>
    <dependencies>
        <!--1.apollo-client-->
        <dependency>
            <groupId>com.ctrip.framework.apollo</groupId>
            <artifactId>apollo-client</artifactId>
            <version>1.1.2</version>
        </dependency>
        <!--slf4j-simple-->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>2.0.0</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>8</source>
                    <target>8</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project>
```

2.ç¼–å†™æµ‹è¯•ç±»GetConfigTestï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç è¯»å–sms.enableçš„å€¼

```java
public class GetConfigTest {
    // VM options:
	// â€Dapp.id=apolloâ€quickstart â€Denv=DEV â€Ddev_meta=http://localhost:8080
    public static void main(String[] args) {
        Config config = ConfigService.getAppConfig();
        String someKey = "sms.enable";
        String value = config.getProperty(someKey, null);
        System.out.println("sms.enable: " + value);
    }
}
```

3.æµ‹è¯•

é…ç½®VM optionsï¼Œè®¾ç½®ç³»ç»Ÿå±æ€§ï¼š

```
â€Dapp.id=apolloâ€quickstart â€Denv=DEV â€Ddev_meta=http://localhost:8080
```

![image-20251012194748875](images/Apolloæ•™ç¨‹_images/image-20251012194748875.png)

è¿è¡ŒGetConfigTestï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œè§‚å¯Ÿè¾“å‡ºç»“æœã€‚

è¿˜å¯æµ‹è¯•ï¼Œä¿®æ”¹apolloç•Œé¢çš„é…ç½®å€¼sms.enableï¼Œtrueæ”¹æˆfalseï¼Œå‘å¸ƒåå†è¿è¡Œçœ‹ç»“æœ

### ğŸ§Š3.çƒ­å‘å¸ƒ

1. ä¿®æ”¹ä»£ç ä¸ºæ¯3ç§’è·å–ä¸€æ¬¡

```java
public class GetConfigTest {
    public static void main(String[] args) throws InterruptedException {
        Config config = ConfigService.getAppConfig();
        String someKey = "sms.enable";
        while (true) {
            String value = config.getProperty(someKey, null);
            System.out.printf("now: %s, sms.enable: %s%n", LocalDateTime.now().toString(),
                    value);
            Thread.sleep(3000L);
        }
    }
}
```

2.åœ¨Apolloç®¡ç†ç•Œé¢ä¿®æ”¹é…ç½®é¡¹ï¼Œå¯ä»¥çœ‹åˆ°ç¨‹åºè·å–çš„sms.enableçš„å€¼å·²ç”±falseå˜æˆäº†ä¿®æ”¹åçš„true

![image-20251012195518242](images/Apolloæ•™ç¨‹_images/image-20251012195518242.png)

# ğŸ“–3.Apolloåº”ç”¨

## âœ…1.Apolloå·¥ä½œåŸç†

ä¸‹å›¾æ˜¯Apolloæ¶æ„æ¨¡å—çš„æ¦‚è§ˆ

![image-20251012195932205](images/Apolloæ•™ç¨‹_images/image-20251012195932205.png)

**å„æ¨¡å—èŒè´£**
ä¸Šå›¾ç®€è¦æè¿°äº†Apolloçš„æ€»ä½“è®¾è®¡ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸‹å¾€ä¸Šçœ‹ï¼š

- Config Serviceæä¾›é…ç½®çš„è¯»å–ã€æ¨é€ç­‰åŠŸèƒ½ï¼ŒæœåŠ¡å¯¹è±¡æ˜¯Apolloå®¢æˆ·ç«¯ã€‚
- Admin Serviceæä¾›é…ç½®çš„ä¿®æ”¹ã€å‘å¸ƒç­‰åŠŸèƒ½ï¼ŒæœåŠ¡å¯¹è±¡æ˜¯Apollo Portalï¼ˆç®¡ç†ç•Œé¢ï¼‰ã€‚
- Eurekaæä¾›æœåŠ¡æ³¨å†Œå’Œå‘ç°ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œç›®å‰Eurekaåœ¨éƒ¨ç½²æ—¶å’ŒConfig Serviceæ˜¯åœ¨ä¸€ä¸ªJVMè¿›ç¨‹ä¸­çš„ã€‚
- Config Serviceå’ŒAdmin Serviceéƒ½æ˜¯å¤šå®ä¾‹ã€æ— çŠ¶æ€éƒ¨ç½²ï¼Œæ‰€ä»¥éœ€è¦å°†è‡ªå·±æ³¨å†Œåˆ°Eurekaä¸­å¹¶ä¿æŒå¿ƒè·³
- åœ¨Eurekaä¹‹ä¸Šæ¶äº†ä¸€å±‚Meta Serverç”¨äºå°è£…Eurekaçš„æœåŠ¡å‘ç°æ¥å£ã€‚
- Clienté€šè¿‡åŸŸåè®¿é—®Meta Serverè·å–Config ServiceæœåŠ¡åˆ—è¡¨ï¼ˆIP+Portï¼‰ï¼Œè€Œåç›´æ¥é€šè¿‡IP+Portè®¿é—®æœåŠ¡ï¼ŒåŒæ—¶åœ¨Clientä¾§ä¼šåšloadbalanceã€é”™è¯¯é‡è¯•ã€‚
- Portalé€šè¿‡åŸŸåè®¿é—®Meta Serverè·å–Admin ServiceæœåŠ¡åˆ—è¡¨ï¼ˆIP+Portï¼‰ï¼Œè€Œåç›´æ¥é€šè¿‡IP+Portè®¿é—®æœåŠ¡ï¼ŒåŒæ—¶åœ¨Portalä¾§ä¼šåšloadbalanceã€é”™è¯¯é‡è¯•ã€‚
- ä¸ºäº†ç®€åŒ–éƒ¨ç½²ï¼Œæˆ‘ä»¬å®é™…ä¸Šä¼šæŠŠConfig Serviceã€Eurekaå’ŒMeta Serverä¸‰ä¸ªé€»è¾‘è§’è‰²éƒ¨ç½²åœ¨åŒä¸€ä¸ªJVMè¿›ç¨‹ä¸­ã€‚

**åˆ†æ­¥æ‰§è¡Œæµç¨‹**

1. Apolloå¯åŠ¨åï¼ŒConfig/Admin Serviceä¼šè‡ªåŠ¨æ³¨å†Œåˆ°EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œå¹¶å®šæœŸå‘é€ä¿æ´»å¿ƒè·³ã€‚
2. Apollo Clientå’ŒPortalç®¡ç†ç«¯é€šè¿‡é…ç½®çš„Meta Serverçš„åŸŸååœ°å€ç»ç”±Software Load Balancer(è½¯ä»¶è´Ÿè½½å‡è¡¡å™¨)è¿›è¡Œè´Ÿè½½å‡è¡¡ååˆ†é…åˆ°æŸä¸€ä¸ªMeta Serverã€‚
3. Meta Serverä»Eurekaè·å–Config Serviceå’ŒAdmin Serviceçš„æœåŠ¡ä¿¡æ¯ï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªEureka Clientã€‚
4. Meta Serverè·å–Config Serviceå’ŒAdmin Serviceï¼ˆIP+Portï¼‰å¤±è´¥åä¼šè¿›è¡Œé‡è¯•ã€‚
5. è·å–åˆ°æ­£ç¡®çš„Config Serviceå’ŒAdmin Serviceçš„æœåŠ¡ä¿¡æ¯åï¼ŒApollo Clienté€šè¿‡Config Servã€‚iceä¸ºåº”ç”¨æä¾›é…ç½®è·å–ã€å®æ—¶æ›´æ–°ç­‰åŠŸèƒ½ï¼›Apollo Portalç®¡ç†ç«¯é€šè¿‡Admin Serviceæä¾›é…ç½®æ–°å¢ã€ä¿®æ”¹ã€å‘å¸ƒç­‰åŠŸèƒ½ã€‚

## âœ…2.æ ¸å¿ƒæ¦‚å¿µ

1. application (åº”ç”¨)
  è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯å®é™…ä½¿ç”¨é…ç½®çš„åº”ç”¨ï¼ŒApolloå®¢æˆ·ç«¯åœ¨è¿è¡Œæ—¶éœ€è¦çŸ¥é“å½“å‰åº”ç”¨æ˜¯è°ï¼Œä»è€Œå¯ä»¥å»è·å–
  å¯¹åº”çš„é…ç½®
  å…³é”®å­—ï¼šappId
2. environment (ç¯å¢ƒ)
  é…ç½®å¯¹åº”çš„ç¯å¢ƒï¼ŒApolloå®¢æˆ·ç«¯åœ¨è¿è¡Œæ—¶éœ€è¦çŸ¥é“å½“å‰åº”ç”¨å¤„äºå“ªä¸ªç¯å¢ƒï¼Œä»è€Œå¯ä»¥å»è·å–åº”ç”¨çš„é…ç½®
  å…³é”®å­—ï¼šenv
3. cluster (é›†ç¾¤)
  ä¸€ä¸ªåº”ç”¨ä¸‹ä¸åŒå®ä¾‹çš„åˆ†ç»„ï¼Œæ¯”å¦‚å…¸å‹çš„å¯ä»¥æŒ‰ç…§æ•°æ®ä¸­å¿ƒåˆ†ï¼ŒæŠŠä¸Šæµ·æœºæˆ¿çš„åº”ç”¨å®ä¾‹åˆ†ä¸ºä¸€ä¸ªé›†ç¾¤ï¼ŒæŠŠåŒ—
  äº¬æœºæˆ¿çš„åº”ç”¨å®ä¾‹åˆ†ä¸ºå¦ä¸€ä¸ªé›†ç¾¤ã€‚
  å…³é”®å­—ï¼šcluster
4. namespace (å‘½åç©ºé—´)
  ä¸€ä¸ªåº”ç”¨ä¸‹ä¸åŒé…ç½®çš„åˆ†ç»„ï¼Œå¯ä»¥ç®€å•åœ°æŠŠnamespaceç±»æ¯”ä¸ºæ–‡ä»¶ï¼Œä¸åŒç±»å‹çš„é…ç½®å­˜æ”¾åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œ
  å¦‚æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼ŒRPCé…ç½®æ–‡ä»¶ï¼Œåº”ç”¨è‡ªèº«çš„é…ç½®æ–‡ä»¶ç­‰
  å…³é”®å­—ï¼šnamespaces

å®ƒä»¬çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![image-20251012201832682](images/Apolloæ•™ç¨‹_images/image-20251012201832682.png)

## âœ…3.é¡¹ç›®ç®¡ç†

### ğŸ§Š1.åŸºç¡€è®¾ç½®

- éƒ¨é—¨ç®¡ç†
- æ·»åŠ ç”¨æˆ·

1.apollo é»˜è®¤éƒ¨é—¨æœ‰ä¸¤ä¸ªã€‚è¦å¢åŠ è‡ªå·±çš„éƒ¨é—¨ï¼Œå¯åœ¨ç³»ç»Ÿå‚æ•°ä¸­ä¿®æ”¹ï¼š

![image-20251012202316683](images/Apolloæ•™ç¨‹_images/image-20251012202316683.png)

è¿›å…¥ç³»ç»Ÿå‚æ•°è®¾ç½®ï¼Œè¾“å…¥keyæŸ¥è¯¢å·²å­˜åœ¨çš„éƒ¨é—¨è®¾ç½®ï¼šorganizations

![image-20251012202408299](images/Apolloæ•™ç¨‹_images/image-20251012202408299.png)

æŸ¥è¯¢å‡ºæ¥åï¼Œåœ¨valueä¸­ä¿®æ”¹å¹¶æ·»åŠ ä¸€ä¸ªjsonç»„å³å¯ã€‚

![image-20251012202457964](images/Apolloæ•™ç¨‹_images/image-20251012202457964.png)

2. æ·»åŠ ç”¨æˆ·ï¼šapolloé»˜è®¤æä¾›ä¸€ä¸ªè¶…çº§ç®¡ç†å‘˜: apolloï¼Œå¯ä»¥è‡ªè¡Œæ·»åŠ ç”¨æˆ·

![image-20251012202848344](images/Apolloæ•™ç¨‹_images/image-20251012202848344.png)

![image-20251012202915307](images/Apolloæ•™ç¨‹_images/image-20251012202915307.png)

### ğŸ§Š2.åˆ›å»ºé¡¹ç›®

1. æ‰“å¼€apollo-portalä¸»é¡µï¼šhttp://localhost:8070/
2. ç‚¹å‡»â€œåˆ›å»ºé¡¹ç›®â€ï¼šaccount-service
3. è¾“å…¥é¡¹ç›®ä¿¡æ¯
   - éƒ¨é—¨ï¼šé€‰æ‹©åº”ç”¨æ‰€åœ¨çš„éƒ¨é—¨ã€‚
   - åº”ç”¨AppIdï¼šç”¨æ¥æ ‡è¯†åº”ç”¨èº«ä»½çš„å”¯ä¸€idï¼Œæ ¼å¼ä¸ºstringï¼Œéœ€è¦å’Œé¡¹ç›®é…ç½®æ–‡ä»¶applications.propertiesä¸­é…ç½®çš„app.idå¯¹åº”ã€‚
   - åº”ç”¨åç§°ï¼šåº”ç”¨åï¼Œä»…ç”¨äºç•Œé¢å±•ç¤ºã€‚
   - åº”ç”¨è´Ÿè´£äººï¼šé€‰æ‹©çš„äººé»˜è®¤ä¼šæˆä¸ºè¯¥é¡¹ç›®çš„ç®¡ç†å‘˜ï¼Œå…·å¤‡é¡¹ç›®æƒé™ç®¡ç†ã€é›†ç¾¤åˆ›å»ºã€Namespaceåˆ›å»ºç­‰æƒé™ã€‚

![image-20251012203153480](images/Apolloæ•™ç¨‹_images/image-20251012203153480.png)

ç‚¹å‡»æäº¤ï¼Œåˆ›å»ºæˆåŠŸåï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ°é¡¹ç›®é¦–é¡µã€‚

![image-20251012203330538](images/Apolloæ•™ç¨‹_images/image-20251012203330538.png)

4. èµ‹äºˆå…¶ä»–ç”¨æˆ·æƒé™æ¥ç®¡ç†è¿™ä¸ªaccount-serviceæœåŠ¡
   - ä½¿ç”¨ç®¡ç†å‘˜apolloï¼Œè¿›å…¥æŒ‡å®šé¡¹ç›®å¹¶æˆæƒç»™å…¶ä»–ç”¨æˆ·

![image-20251012203844904](images/Apolloæ•™ç¨‹_images/image-20251012203844904.png)

å°†ä¿®æ”¹å’Œå‘å¸ƒæƒé™éƒ½æˆæƒç»™ç”¨æˆ·man

![image-20251012204107691](images/Apolloæ•™ç¨‹_images/image-20251012204107691.png)

æœ€åä½¿ç”¨manç™»å½•ï¼ŒæŸ¥çœ‹é¡¹ç›®é…ç½®æƒé™æ˜¯å¦ç”Ÿæ•ˆã€‚



### ğŸ§Š3.åˆ é™¤é¡¹ç›®

å¦‚æœè¦åˆ é™¤æ•´ä¸ªé¡¹ç›®ï¼Œç‚¹å‡»å³ä¸Šè§’çš„â€œç®¡ç†å‘˜å·¥å…·-->åˆ é™¤åº”ç”¨ã€é›†ç¾¤...â€
é¦–å…ˆæŸ¥è¯¢å‡ºè¦åˆ é™¤çš„é¡¹ç›®ï¼Œç‚¹å‡»â€œåˆ é™¤åº”ç”¨â€

![image-20251012204340082](images/Apolloæ•™ç¨‹_images/image-20251012204340082.png)

![image-20251012204458202](images/Apolloæ•™ç¨‹_images/image-20251012204458202.png)



## âœ…4.é…ç½®ç®¡ç†

### ğŸ§Š1.æ·»åŠ å‘å¸ƒé…ç½®é¡¹

1. é€šè¿‡è¡¨æ ¼æ¨¡å¼æ·»åŠ é…ç½®
   - è¾“å…¥key-vlueå€¼æäº¤å³å¯

![image-20251012223233072](images/Apolloæ•™ç¨‹_images/image-20251012223233072.png)

![image-20251012223307401](images/Apolloæ•™ç¨‹_images/image-20251012223307401.png)

2. é€šè¿‡æ–‡æœ¬æ¨¡å¼ç¼–è¾‘
   - è¿™ç§æ–¹å¼å¯ä»¥å°†é¡¹ç›®çš„é…ç½®å¤åˆ¶è¿‡æ¥æ‰¹é‡å¯¼å…¥

![image-20251012223543643](images/Apolloæ•™ç¨‹_images/image-20251012223543643.png)

3. å‘å¸ƒé…ç½®

![image-20251012223629486](images/Apolloæ•™ç¨‹_images/image-20251012223629486.png)

### ğŸ§Š2.ä¿®æ”¹åˆ é™¤é…ç½®

1. æ‰¾åˆ°å¯¹åº”çš„é…ç½®é¡¹ï¼Œç‚¹å‡»ä¿®æ”¹æˆ–è€…åˆ é™¤æ“ä½œ

![image-20251012223923972](images/Apolloæ•™ç¨‹_images/image-20251012223923972.png)

2. ä¿®æ”¹ä¸ºéœ€è¦çš„å€¼ï¼Œç‚¹å‡»æäº¤
3. å‘å¸ƒé…ç½®



### ğŸ§Š3.æ·»åŠ Namespace

Namespaceä½œä¸ºé…ç½®çš„åˆ†ç±»ï¼Œå¯å½“æˆä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚

ä»¥æ·»åŠ rocketmqé…ç½®ä¸ºä¾‹ï¼Œæ·»åŠ â€œspring-rocketmqâ€ Namespaceé…ç½®rocketmqç›¸å…³ä¿¡æ¯ã€‚

1. æ·»åŠ é¡¹ç›®ç§æœ‰Namespaceï¼šspring-rocketmq

è¿›å…¥é¡¹ç›®é¦–é¡µï¼Œç‚¹å‡»å·¦ä¸‹è„šçš„â€œæ·»åŠ Namespaceâ€ï¼Œå…±åŒ…æ‹¬ä¸¤é¡¹ï¼šå…³è”å…¬å…±Namespaceå’Œåˆ›å»ºNamespaceï¼Œ

è¿™é‡Œé€‰æ‹©â€œåˆ›å»ºNamespaceâ€

### ğŸ§Š4.å…¬å…±é…ç½®



## 5 å¤šé¡¹ç›®é…ç½®

## 6 é›†ç¾¤ç®¡ç†

1 åˆ›å»ºé›†ç¾¤ 

2 åŒæ­¥é›†ç¾¤é…ç½®

3 è¯»å–é…ç½®

## 7 é…ç½®å‘å¸ƒåŸç†

# Apolloåº”ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿ

## 1 é¡¹ç›®åœºæ™¯ä»‹ç»

## 2 Spring Bootåº”ç”¨é›†æˆ



## 4 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²



## 5 ç°åº¦å‘å¸ƒ

